📘 제2장: MongoDB 아키텍처
1. MongoDB의 분산 시스템 구조
   MongoDB는 기본적으로 분산 시스템으로 설계되어 있으며, 대부분의 사용자 환경에서는 복제 세트(replica set) 구성을 사용합니다.

복제 세트는 데이터의 고가용성과 내결함성을 보장하며, 기본적으로 3개의 노드로 구성됩니다.

각 노드는 데이터베이스의 전체 복사본을 보유하며, 서로 다른 인스턴스나 호스트에서 실행될 수 있습니다.

2. 복제(replication)
   복제는 MongoDB의 핵심 기능으로, 데이터를 여러 서버에 복제하여 데이터의 가용성과 내구성을 높입니다.

복제 세트의 구성 요소:

Primary 노드: 모든 쓰기 작업을 처리하며, 변경 사항을 oplog에 기록합니다.

Secondary 노드: Primary의 oplog를 읽어 데이터를 복제하며, Primary 노드가 다운될 경우 새로운 Primary로 승격될 수 있습니다.

복제는 RAFT 합의 프로토콜을 기반으로 하며, 노드의 가용성, 데이터의 최신성, 응답 시간 등을 고려하여 Primary 노드를 선출합니다.

3. 샤딩(sharding)
   샤딩은 MongoDB의 수평 확장 기능으로, 데이터를 여러 서버에 분산 저장하여 대규모 데이터베이스를 효율적으로 관리합니다.

샤딩 구성 요소:

Shard: 데이터의 실제 저장소로, 각 Shard는 복제 세트로 구성됩니다.

Config 서버: 샤딩 메타데이터를 저장하며, 클러스터의 구성을 관리합니다.

Mongos: 클라이언트의 요청을 적절한 Shard로 라우팅하는 라우터 역할을 합니다.

샤딩은 데이터의 분산 저장을 통해 읽기 및 쓰기 성능을 향상시키며, 대규모 애플리케이션에 적합합니다.

4. 복제와 샤딩의 결합
   MongoDB에서는 복제와 샤딩을 결합하여 데이터의 고가용성 및 수평 확장을 동시에 지원합니다.

각 Shard는 복제 세트로 구성되어 데이터의 내구성과 가용성을 보장하며, 샤딩을 통해 데이터의 분산 저장 및 성능 향상을 이룹니다.

5. MongoDB 7.0의 새로운 기능
   MongoDB 7.0에서는 샤딩 클러스터의 성능 및 관리 기능이 향상되었습니다.

새로운 샤딩 기능을 통해 데이터의 분산 저장 및 관리를 더욱 효율적으로 수행할 수 있습니다.

이 장에서는 MongoDB의 아키텍처를 이해하고, 복제와 샤딩을 통해 데이터의 고가용성 및 수평 확장을 구현하는 방법을 다루고 있습니다. 이를 통해 대규모 애플리케이션에서 MongoDB를 효과적으로 활용할 수 있습니다.